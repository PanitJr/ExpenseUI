!function(){"use strict";angular.module("auth",["ngRoute","ngCookies"]).run(["$rootScope","$controller",function(a,b){a.Auth=b("AuthController"),a.$on("$routeChangeStart",function(b,c,d){a.Auth.setLayout()})}])}(),function(){"use strict";function a(a){a.when("/",{templateUrl:"views/objects/Item/dashboard.html",controller:"DashboardController as dashboard"}),a.when("/:objectname/list",{templateUrl:"views/layout/list.html",controller:"ListController as list"}),a.when("/:objectname/detail/:record",{templateUrl:"views/layout/detail.html",controller:"DetailController as detail"}),a.when("/:objectname/edit/:record",{templateUrl:"views/layout/edit.html",controller:"EditController as edit"}),a.when("/:objectname/edit",{templateUrl:"views/layout/edit.html",controller:"EditController as edit"})}function b(a){a.when("/user/list",{templateUrl:"views/objects/User/list.html",controller:"UserListController as list"}),a.when("/user/detail/:record",{templateUrl:"views/objects/User/detail.html",controller:"UserDetailController as detail"}),a.when("/user/edit/:record",{templateUrl:"views/objects/User/edit.html",controller:"UserEditController as edit"}),a.when("/user/edit",{templateUrl:"views/objects/User/edit.html",controller:"UserEditController as edit"})}angular.module("layout",["ngRoute","ngMaterial"]).config(["$routeProvider","$mdDateLocaleProvider",function(c,d){b(c),a(c),d.formatDate=function(a){return moment(a).format("YYYY-MM-DD")}}]).run(["$rootScope","$controller",function(a,b){a.errorTemplate="views/layout/error.html",a.history=window.history,a.$on("$routeChangeSuccess",function(b,c,d){a.error={status:!1,code:null,massage:null}})}])}(),function(){function a(a,b,c,d,e,f,g){function h(){a.post("login",{u:m.email,p:m.password}).then(function(a){var c=a.data;c.success?(m.data=c.data,b.put("auth_token",c.data.token),k()):m.error_massage=c.error_massage})}function i(c){var d=c.getBasicProfile();d?a.post("logingoogle",{u:d.getEmail(),Fname:d.getGivenName(),Lname:d.getFamilyName()}).then(function(a){console.log(a);var c=a.data;c.success?(gapi.auth2.getAuthInstance().signOut(),b.put("auth_token",c.data.token),k()):m.error_massage=c.error_massage}):m.error_massage=result.error_massage}function j(){b.remove("auth_token"),k()}function k(){"undefined"!=typeof b.get("auth_token")?a.authpost("current_user",{}).success(function(a){m.data=a.data.user,l("layout")}).error(function(a){l("login")}):l("login")}function l(a){f._body!=n[a]&&(f._body=n[a])}var m=this;m.email=null,m.password=null,m.data={},m.login=h,m.logout=j,m.setLayout=k,m.confirm={};var n={layout:"views/layout/layout.html",login:"views/auth/login.html"};window.loginGoogle=i,m.showConfirm=function(a){m.confirm=g.confirm().title("Would you like to delete your debt?").textContent("All of the banks have agreed to forgive you your debts.").ariaLabel("Lucky day").targetEvent(a).ok("Please do it!").cancel("Sounds like a scam"),g.show(m.confirm).then(function(){j()},function(){})}}angular.module("auth").controller("AuthController",["apiService","$cookies","$location","$log","$q","$rootScope","$mdDialog",a])}(),function(){function a(a,b,c){function d(){var a=new google.visualization.DataTable;a.addColumn("string","Topping"),a.addColumn("number","Slices"),a.addRows([["Last 4 Month",e.columnchart[4]],["Last 3 Month",e.columnchart[3]],["Last 2 Month",e.columnchart[2]],["Last Month",e.columnchart[1]],["This Month",e.columnchart[0]]]);var b=new google.visualization.DataTable;b.addColumn("string","Topping"),b.addColumn("number","Slices"),b.addRows([[e.piechart[0].name,e.piechart[0].cost],[e.piechart[1].name,e.piechart[1].cost],[e.piechart[2].name,e.piechart[2].cost],[e.piechart[3].name,e.piechart[3].cost]]);var c={title:"Bar Chart: company expenses by Opportunity",width:400,height:300},d=new google.visualization.BarChart(document.getElementById("piechart_div"));d.draw(b,c);var f={title:"Column Chart: Company expense summary by month",width:400,height:300,legend:"none"},g=new google.visualization.ColumnChart(document.getElementById("barchart_div"));g.draw(a,f);var h={title:"Pie Chart: company expenses by Opportunity proportion",width:400,height:300},i=new google.visualization.PieChart(document.getElementById("Pjune"));i.draw(b,h)}var e=this;e.columnchart=[],b.get(c.apiurl+"columnchart").then(function(a){e.columnchart=a.data.data}),b.get(c.apiurl+"piechart").then(function(a){e.piechart=a.data.data,console.log(e.piechart)}),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(d)}angular.module("layout").controller("ChartController",["ChartService","$http","$rootScope",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");g.show(b).then(function(){d.deleteRecord(k.objectName,k.record,function(a){f.path("/"+k.objectName+"/list")})})}var k=this;k.objectName=c.objectname,k.record=c.record,k.deleteRecord=j,k.errorStatus=!1,d.getDetail(k.objectName,k.record,{},function(a){k.blocks=a.blocks,k.label=a.label,k.data=a.data},i.error_page)}angular.module("layout").controller("DetailController",["$q","$scope","$routeParams","detailService","$timeout","$location","$mdDialog","$rootScope","helperService",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit(i.objectName,i.record,i.data,function(a){f.path("/"+i.objectName+"/detail/"+a.id)})}var i=this;i.objectName=c.objectname,i.record=c.record,i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){i.blocks=a.blocks,i.label=a.label,i.data=a.data},g.error_page)}angular.module("layout").controller("EditController",["$q","$scope","$routeParams","editService","$timeout","$location","helperService",a])}(),function(){function a(a,b,c,d,e){function f(){a("left").toggle()}var g=this;g.toggleList=f}angular.module("layout").controller("LayoutController",["$mdSidenav","$mdBottomSheet","$log","$scope","$controller",a])}(),function(){function a(a,b,c,d,e,f){function g(){m.query.search="",h(m.objectName,m.query)}function h(a,b){m.promise=d.getList(a,b,i)}function i(a){var b=a.listInfo;m.heads=a.header,m.total=b.total,m.listdatas=b.data}function j(a,b){m.query=angular.extend({},m.query,{page:a,limit:b}),h(m.objectName,m.query)}function k(a){m.query=angular.extend({},m.query,{order:a}),h(m.objectName,m.query)}function l(a){f.path("/"+m.objectName+"/detail/"+a)}var m=this;m.objectName=c.objectname,m.heads={},m.limitoption=[10,25,50,100],m.total=0,m.query={search:"",order:null,limit:10,page:1},m.selected=[],m.onPaginate=j,m.onReorder=k,m.getDetail=l,m.loadList=h,m.cancleSearch=g,h(m.objectName,m.query)}angular.module("layout").controller("ListController",["$q","$scope","$routeParams","listService","$timeout","$location",a])}(),function(){function a(a,b,c,d){function e(){b("left").toggle()}function f(a){g.selected=a}var g=this;g.toggleList=e,g.selectObject=f,g.object=[],g.managelist=[],a.loadObjectHome(function(a){g.object=a.list,g.managelist=a.manage})}angular.module("layout").controller("SidenavController",["layoutService","$mdSidenav","$mdBottomSheet","$log","$q",a])}(),function(){function a(a,b,c,d){function e(a){k.progress=!0;var b=f(c.data_approve.data);d({data:b,report:c.report,filename:c.filename,param:c.param},function(b){var d=angular.extend({},c,b);j(a,d)})}function f(a){var b=[];for(var c in a)a[c]._a&&b.push(a[c]._l);return b.join(":")}function g(a){angular.forEach(c.data_approve.data,function(b){b._a=a})}function h(a){a||(k.approveAll=!1)}function i(a){j(a,c),b.cancel()}function j(a,c){b.show({controller:"importResultController",controllerAs:"import",templateUrl:"views/layout/importResult.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!1,locals:{report:c}})}var k=this;k.cancel=i,k.save=e,k.selectAll=g,k.lineSelect=h,k.data_approve=c.data_approve,k.duplicate=c.duplicate,k.approveAll=!0,k.progress=!1}angular.module("layout").controller("importApproveController",["$scope","$mdDialog","report","importFnApprove",a])}(),function(){function a(a,b,c,d,e){function f(a){j.progress=!0,c(e,function(b){b.approve?i(a,b,d):h(a,b)})}function g(){b.cancel()}function h(a,c){b.show({controller:"importResultController",controllerAs:"import",templateUrl:"views/layout/importResult.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!1,locals:{report:c}})}function i(a,c,d){b.show({controller:"importApproveController",controllerAs:"import",templateUrl:"views/layout/importApprove.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!1,locals:{report:c,importFnApprove:d}})}var j=this;j.cancel=g,j.save=f,j.sample=e.sample,j.fieldMapping=e.fieldMapping,j.sample=e.sample,j.progress=!1}angular.module("layout").controller("importMappingController",["$scope","$mdDialog","importFn","importFnApprove","data_template",a])}(),function(){function a(a,b,c,d){function e(){b.cancel(),c.reload()}var f=this;f.done=e,f.report=d}angular.module("layout").controller("importResultController",["$scope","$mdDialog","$route","report",a])}(),function(){"use strict";function a(a,b,c,d,e){var f=d.apiurl,g=function(a){e.alert_error({error_code:"Alert Dialog",error_massage:"Loss connection to api server"})},h=function(a){return angular.extend({},a||{},{token:c.get("auth_token")})},i=function(a,b,c){var d,e=b||new FormData;for(var f in a)a.hasOwnProperty(f)&&(d=c?c+"["+f+"]":f,"object"!=typeof a[f]||a[f]instanceof File||a[f]instanceof Blob?a[f]instanceof Blob?e.append(d,a[f],d):e.append(d,a[f]):i(a[f],e,d));return e};return{configAjax:{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;"}},post:function(a,c){return b.post(f+a,$.param(c),this.configAjax).error(g)},get:function(a,c){return b.get(f+a+"?"+$.param(c),this.configAjax).error(g)},authpost:function(a,c){var d=h(c),e=i(d);return b.post(f+a,e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).error(g)},authget:function(a,c){return c=h(c),b.get(f+a+"?"+$.param(c),this.configAjax).error(g)},authgetUrl:function(a,b){return b=h(b),f+a+"?"+$.param(b)},authpostFile:function(a,d){return d.append("token",c.get("auth_token")),b.post(f+a,d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).error(g)}}}angular.module("auth").service("apiService",["$q","$http","$cookies","$rootScope","helperService",a])}(),function(){"use strict";function a(a,b,c){return{getData:function(a,c,d){return b.get(a,c).then(function(a){a.data.success&&d(a.data.data)})}}}angular.module("layout").service("ChartService",["$q","apiService","helperService",a])}(),function(){"use strict";function a(a,b,c){return{submit:function(a,d,e,f){return b.authpost(a+"/submit/"+d,e).then(function(a){if(a.data.success){if(f(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;c.alert_error({error_code:b.code,error_massage:b.massage})}}else c.alert_error(a.data)})}}}angular.module("layout").factory("DashboardService",["$q","apiService","helperService",a])}(),function(){"use strict";function a(a,b){return{getDetail:function(a,c,d,e,f){return b.authget(a+"/detail/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},deleteRecord:function(a,c,d){return b.authpost(a+"/delete/"+c,{}).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("detailService",["$q","apiService",a])}(),function(){"use strict";function a(a,b,c){return{getEdit:function(a,c,d,e,f){return b.authget(a+"/edit/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},saveEdit:function(a,d,e,f){return b.authpost(a+"/edit/"+d,e).then(function(a){if(a.data.success){if(f(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;c.alert_error({error_code:b.code,error_massage:b.massage})}}else c.alert_error(a.data)})},getCost:function(a,c,d,e,f){return b.get(a+"/edit/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})}}}angular.module("layout").service("editService",["$q","apiService","helperService",a])}(),function(){"use strict";function a(a,b){return{loadObjectHome:function(a){b.authget("object_home").then(function(b){var c=b.data.data;a(c)})}}}angular.module("layout").service("layoutService",["$q","apiService",a])}(),function(){"use strict";function a(a,b){return{getList:function(a,c,d){return b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})},getPopupList:function(a,c,d){return c.view="popup",b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("listService",["$q","apiService",a])}(),function(){"use strict";function a(a,b,c){return{show_alert_error:!1,b64toBlob:function(a){var b;b=a.split(",")[0].indexOf("base64")>=0?atob(a.split(",")[1]):unescape(a.split(",")[1]);for(var c=a.split(",")[0].split(":")[1].split(";")[0],d=new Uint8Array(b.length),e=0;e<b.length;e++)d[e]=b.charCodeAt(e);return new Blob([d],{type:c})},error_page:function(a){c.error={status:!0,code:a.error_code,massage:a.error_massage}},alert_error:function(a){var c=this;c.show_alert_error||(c.show_alert_error=!0,b.show(b.alert().clickOutsideToClose(!1).title(a.error_code).textContent(a.error_massage).ariaLabel(a.error_code).ok("OK")).then(function(){c.show_alert_error=!1}))}}}angular.module("layout").service("helperService",["$q","$mdDialog","$rootScope",a])}(),function(){function a(a,b,c,d,e,f,g,h,i,j){function k(){j.open("http://localhost:8000/api/pdf?token=jSp2kjkT5kmHNXnX3vYxamS5P6AJ2cffoZ1dbZ6HBmyhOHkGq9v13fWDEmyd","_blank")}function l(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delete record").targetEvent(a).ok("Delete").cancel("Cancel");g.show(b).then(function(){d.deleteRecord(p.objectName,p.record,function(a){f.path("/"+p.objectName+"/list")})})}function m(a){var b=g.confirm().title("Do you want to Approve "+p.data.expensename+" ?").textContent("Some detail").ariaLabel("Approved").targetEvent(a).ok("Approve").cancel("Cancel");g.show(b).then(function(){p.data.status_id=1,d.saveEdit(p.objectName,p.record,p.data,function(a){f.path("/"+p.objectName+"/list")})})}function n(a){var b=g.confirm().title("Do you want to Reject "+p.data.expensename+" ?").textContent("Some detail").ariaLabel("Approved").targetEvent(a).ok("Reject").cancel("Cancel");g.show(b).then(function(){p.data.status_id=2,d.saveEdit(p.objectName,p.record,p.data,function(a){f.path("/"+p.objectName+"/list")})})}function o(a,b){var c=g.confirm().title("Do you want to Reject "+b.itemname+" ?").textContent("Some detail").ariaLabel("Approved").targetEvent(a).ok("Reject").cancel("Cancel");g.show(c).then(function(){b.status_id=1,console.log(b.id+"Error"),d.saveEdit("Item",b.id,b,function(a){f.path("/"+p.objectName+"/detail/"+p.expenseid)})})}var p=this;p.objectName="Expense",p.record=c.record,p.deleteRecord=l,p.showConfirm=m,p.showReject=n,p.showRejectItem=o,p.getPdf=k,p.errorStatus=!1,d.getDetails(p.objectName,p.record,{},function(a){console.log(a),p.blocks=a.blocks,p.label=a.data.label,p.data=a.data,p.expensename=a.data.expensename,p.status_id=a.data.status_id,p.expenseid=a.data.id},i.error_page)}angular.module("layout").controller("ExpenDetailController",["$q","$scope","$routeParams","ExpenDetailService","$timeout","$location","$mdDialog","$rootScope","helperService","$window",a])}(),function(){"use strict";function a(a,b,c){return angular.extend(c,{getDetails:function(a,c,d,e,f){return b.authget(a+"/detail/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},deleteRecord:function(a,c,d){return b.authpost(a+"/delete/"+c,{}).then(function(a){var b=a.data.data;d(b)})},saveEdit:function(a,c,d,e){return b.authpost(a+"/edit/"+c,d).then(function(a){if(a.data.success){if(e(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;helperService.alert_error({error_code:b.code,error_massage:b.massage})}}else helperService.alert_error(a.data)})}})}angular.module("layout").service("ExpenDetailService",["$q","apiService","detailService",a])}(),function(){function a(a,b,c,d,e,f){function g(){m.query.search="",h(m.objectName,m.query)}function h(a,b){m.promise=d.getList(a,b,i)}function i(a){console.log(a);var b=a.listInfo;m.heads=a.header,m.total=b.total,m.listdatas=b.data}function j(a,b){m.query=angular.extend({},m.query,{page:a,limit:b}),h(m.objectName,m.query)}function k(a){m.query=angular.extend({},m.query,{order:a}),h(m.objectName,m.query)}function l(a){f.path("/"+m.objectName+"/detail/"+a)}var m=this;m.objectName="Expense",m.heads={},m.limitoption=[10,25,50,100],m.total=0,m.query={search:"",order:null,limit:20,page:1},m.selected=[],m.onPaginate=j,m.onReorder=k,m.getDetail=l,m.loadList=h,m.cancleSearch=g,h(m.objectName,m.query)}angular.module("layout").controller("ExpenListController",["$q","$scope","$routeParams","ExpenseListService","$timeout","$location",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit(i.objectName,i.record,i.data,function(a){f.path("/"+i.objectName+"/detail/"+a.id)})}var i=this;i.objectName=c.objectname,i.record=c.record,i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){i.blocks=a.blocks,i.label=a.label,i.data=a.data},g.error_page)}angular.module("layout").controller("ExpenseEditController",["$q","$scope","$routeParams","editService","$timeout","$location","helperService",a])}(),function(){"use strict";function a(a,b,c){return{getEdit:function(a,c,d,e,f){return b.authget(a+"/edit/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},saveEdit:function(a,d,e,f){return b.authpost(a+"/edit/"+d,e).then(function(a){if(a.data.success){if(f(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;c.alert_error({error_code:b.code,error_massage:b.massage})}}else c.alert_error(a.data)})}}}angular.module("layout").service("editService",["$q","apiService","helperService",a])}(),function(){"use strict";function a(a,b){return{getList:function(a,c,d){return b.authget(a+"/expenseList",c).then(function(a){var b=a.data.data;d(b)})},getPopupList:function(a,c,d){return c.view="popup",b.authget(a+"/expenseList",c).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("ExpenseListService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g,h){function i(a,b){j["promise"+a]=c.getList(a,b,function(b){var c=b.listInfo;j["heads"+a]=b.header,j["total"+a]=c.total,j["listdatas"+a]=c.data})}var j=this;j.showItemlList=!0,j.defaultVal=!1,j.defaultItemName="",j.defaultOpportunity="",j.defaultDate=new Date,j.limitoption=[25,50,100],j.objectname="",j.tempcost=0,j.objectList=[],j.selected=[],j.record="",j.headsItem={},j.totalItem=0,j.listdatasItem=[],j.headsTravelType={},j.totalTravelType=0,j.listdatasTravelType=[],j.headsTravelSubType={},j.totalTravelSubType=0,j.listdatasTravelSubType=[],j.headsServiceType={},j.totalServiceType=0,j.listdatasServiceType=[],j.headsBRTStation={},j.totalBRTStation=0,j.listdatasBRTStation=[],j.headsBTSStation={},j.totalBTSStation=0,j.listdatasBTSStation=[],j.headsMRTStation={},j.totalMRTStation=0,j.listdatasMRTStation=[],j.headsOpportunity={},j.totalOpportunity=0,j.listdatasOpportunity=[],j.headsAirPortRailLinkStation={},j.totalAirPortRailLinkStation=0,j.listdatasAirPortRailLinkStation=[],j.queryItem={search:"",order:null,limit:25,page:1},j.queryselectOption={search:"",order:null,limit:100,page:1},j.promiseItem={},j.promiseTravelType={},j.promiseTravelSubType=[],j.promiseServiceType=[],j.promiseBRTStation={},j.promiseBTSStation={},j.promiseMRTStation={},j.promiseAirPortRailLinkStation={},j.promiseOpportunity=[],j.loadList=i,j.showHideTravelList=function(){j.showItemList=!j.showItemList},j.cancleSearch=function(){j.queryItem.search="",i("Item",j.queryItem)},j.onReorder=function(a){j.queryItem=angular.extend({},j.queryItem,{order:a}),i("Item",j.queryItem)},j.onPaginate=function(a,b){j.queryItem=angular.extend({},j.queryItem,{page:a,limit:b}),i("Item",j.queryItem)},j.getDetail=function(a){e.path("/Item/detail/"+a)},j.submitToExpense=function(){h.submit("Item",j.record,j.record,function(a){i("Item",j.queryItem)})},j.getitemcost=function(a){void 0!=a.origination&&void 0!=a.destination&&g.get(f.apiurl+"getpublictransportcost/"+a.travel_sub_type+"/"+a.origination+"/"+a.destination).then(function(b){a.item.cost=parseFloat(b.data.data[0].cost)})},j.addObject=function(c){b.getEdit("Item",j.record,{},function(a){a.objectname="Item",null==a.data.item&&(a.data.item={}),a.data.itemname=j.defaultItemName,a.data.opportunity=j.defaultOpportunity,a.data.date=j.defaultDate,a.data.category=c,j.objectList.push(a)},a.error_page)},j.removeObject=function(a){j.objectList.splice(a,1)},j.clone=function(){for(var c=0,d=j.selected.length;c<d;c++)console.log(j.selected[c][j.selected[c].category.toLowerCase()].id),b.getEdit(j.selected[c].category,j.selected[c][j.selected[c].category.toLowerCase()].id,{},function(a){null==a.data.item&&(a.data.item={}),a.data.item_date=new Date,a.data.item_date=j.defaultDate,a.data.item.item_date="",a.data.item.item_date=j.defaultDate.getFullYear()+"-"+(j.defaultDate.getMonth()+1)+"-"+j.defaultDate.getDate(),j.objectList.push(a)},a.error_page)},j.save=function(a,c){a.data.item.id="",void 0==a.data.item.item_date?(a.data.item.item_date="",a.data.item.item_date=j.defaultDate.getFullYear()+"-"+(j.defaultDate.getMonth()+1)+"-"+j.defaultDate.getDate()):(a.data.item.item_date="",a.data.item.item_date=a.data.item_date.getFullYear()+"-"+(a.data.item_date.getMonth()+1)+"-"+a.data.item_date.getDate()),a.data.item.status="rejected",console.log("df date is :"+j.defaultDate),console.log("item date is :"+a.data.item.item_date),a.data.item.category=a.objectname,b.saveEdit("Item",j.record,a.data.item,function(d){a.data.item_id=d.id,b.saveEdit(a.objectname,j.record,a.data,function(a){j.objectList.splice(c,1)})}),i("Item",j.queryItem)}}angular.module("layout").controller("DashboardController",["helperService","editService","listService","$routeParams","$location","$rootScope","$http","DashboardService",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");g.show(b).then(function(){d.deleteRecord(k.objectName,k.record,function(a){f.path("/"+k.objectName+"/list")})})}var k=this;k.objectName="Item",k.record=c.record,k.deleteRecord=j,k.errorStatus=!1,d.getDetail(k.objectName,k.record,{},function(a){k.blocks=a.blocks,k.label=a.label,k.data=a.data},i.error_page)}angular.module("layout").controller("ItemDetailController",["$q","$scope","$routeParams","detailService","$timeout","$location","$mdDialog","$rootScope","helperService",a])}(),function(){function a(a,b){var c=this;a.get(b.apiurl+"allleave").then(function(a){console.log(a),c.leave=a.data.data})}angular.module("layout").controller("AllLeaveController",["$http","$rootScope",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");g.show(b).then(function(){d.deleteRecord(k.objectName,k.record,function(a){f.path("/"+k.objectName+"/leavelist")})})}var k=this;k.objectName="Leave",k.record=c.record,k.deleteRecord=j,k.errorStatus=!1,d.getDetail(k.objectName,k.record,{},function(a){console.log(a),k.blocks=a.blocks,k.label=a.label,k.data=a.data},i.error_page)}angular.module("layout").controller("LeaveDetailController",["$q","$scope","$routeParams","LeaveDetailService","$timeout","$location","$mdDialog","$rootScope","helperService",a])}(),function(){"use strict";function a(a,b){return{getDetail:function(a,c,d,e,f){return b.authget(a+"/detail/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},deleteRecord:function(a,c,d){return b.authpost(a+"/delete/"+c,{}).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("LeaveDetailService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit(i.objectName,i.record,i.data,function(a){f.path("/"+i.objectName+"/leavedetail/"+a.id)})}var i=this;i.objectName="Leave",i.record=c.record,i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){console.log(a),i.blocks=a.blocks,i.label=a.label,i.data=a.data},g.error_page)}angular.module("layout").controller("LeaveEditController",["$q","$scope","$routeParams","LeaveEditService","$timeout","$location","helperService",a])}(),function(){"use strict";function a(a,b,c){return{getEdit:function(a,c,d,e,f){return b.authget(a+"/edit/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},getLeave:function(a,c,d,e,f){return b.authget("individualleave",d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},saveEdit:function(a,d,e,f){return b.authpost(a+"/edit/"+d,e).then(function(a){if(a.data.success){if(f(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;c.alert_error({error_code:b.code,error_massage:b.massage})}}else c.alert_error(a.data)})}}}angular.module("layout").service("LeaveEditService",["$q","apiService","helperService",a])}(),function(){function a(a,b,c,d,e,f,g,h){function i(){o.query.search="",j(o.objectName,o.query)}function j(a,b){o.promise=d.getList(a,b,k)}function k(a){console.log(a);var b=a.listInfo;o.heads=a.header,o.total=b.total,o.listdatas=b.data}function l(a,b){o.query=angular.extend({},o.query,{page:a,limit:b}),j(o.objectName,o.query)}function m(a){o.query=angular.extend({},o.query,{order:a}),j(o.objectName,o.query)}function n(a){f.path("/"+o.objectName+"/leavedetail/"+a)}var o=this;o.objectName="Leave",o.heads={},o.limitoption=[10,25,50,100],o.total=0,o.query={search:"",order:null,limit:5,page:1},o.selected=[],o.start_date=new Date,o.end_date=new Date,o.allday=!1,o.onPaginate=l,o.onReorder=m,o.getDetail=n,o.loadList=j,o.cancleSearch=i,o.individualleave={},g.getLeave("","",{},function(a){o.individualleave=a}),o.record="",o.data={},g.getEdit(o.objectName,o.record,{},function(a){console.log(a),o.blocks=a.blocks,o.label=a.label,o.data=a.data},h.error_page),o.save=function(){o.data.start_date=o.start_date.getFullYear()+"-"+(o.start_date.getMonth()+1)+"-"+o.start_date.getDate(),o.data.end_date=o.end_date.getFullYear()+"-"+(o.end_date.getMonth()+1)+"-"+o.end_date.getDate(),g.saveEdit("Leave",o.record,o.data,function(a){o.loadList("Leave",o.query),g.getLeave("","",{},function(a){o.individualleave=a})})},j(o.objectName,o.query),o.calculateDuration=function(){o.data.leave_duration=8*(o.end_date.getDate()-o.start_date.getDate())+8}}angular.module("layout").controller("LeaveListController",["$q","$scope","$routeParams","LeaveListService","$timeout","$location","LeaveEditService","helperService",a])}(),function(){"use strict";function a(a,b){return{getList:function(a,c,d){return b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})},getPopupList:function(a,c,d){return c.view="popup",b.authget(a+"/detail",c).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("LeaveListService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");g.show(b).then(function(){d.deleteRecord(k.objectName,k.record,function(a){f.path("/"+k.objectName+"/profilelist")})})}var k=this;k.objectName="profilewithpermission",k.record=c.record,k.deleteRecord=j,k.errorStatus=!1,d.getDetail(k.objectName,k.record,{},function(a){k.blocks=a.blocks,k.label=a.label,k.data=a.data,k.data.item=JSON.parse(a.data.item),k.data.expense=JSON.parse(a.data.expense),k.data.leave=JSON.parse(a.data.leave),k.data.user=JSON.parse(a.data.user),k.data.setting=JSON.parse(a.data.setting)},i.error_page)}angular.module("layout").controller("ProfileDetailController",["$q","$scope","$routeParams","ProfiledetailService","$timeout","$location","$mdDialog","$rootScope","helperService",a])}(),function(){"use strict";function a(a,b){return{getDetail:function(a,c,d,e,f){return b.authget(a+"/detail/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},deleteRecord:function(a,c,d){return b.authpost(a+"/delete/"+c,{}).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("ProfiledetailService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit(i.objectName,i.record,i.data,function(a){console.log("added profile id "+a.id),f.path("/"+i.objectName+"/profiledetail/"+a.id)})}var i=this;i.objectName="profilewithpermission",i.record=c.record,i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){i.blocks=a.blocks,i.label=a.label,i.data=a.data,i.data.item=JSON.parse(a.data.item),i.data.expense=JSON.parse(a.data.expense),i.data.leave=JSON.parse(a.data.leave),i.data.user=JSON.parse(a.data.user),i.data.setting=JSON.parse(a.data.setting)},g.error_page)}angular.module("layout").controller("ProfileEditController",["$q","$scope","$routeParams","ProfileeditService","$timeout","$location","helperService",a])}(),function(){"use strict";function a(a,b,c){return{getEdit:function(a,c,d,e,f){return b.authget(a+"/edit/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},saveEdit:function(a,d,e,f){return b.authpost(a+"/edit/"+d,e).then(function(a){if(a.data.success){if(f(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;c.alert_error({error_code:b.code,error_massage:b.massage})}}else c.alert_error(a.data)})}}}angular.module("layout").service("ProfileeditService",["$q","apiService","helperService",a])}(),function(){function a(a,b,c,d,e,f){function g(){m.query.search="",h(m.objectName,m.query)}function h(a,b){m.promise=d.getList(a,b,i)}function i(a){var b=a.listInfo;m.heads=a.header,m.total=b.total,m.listdatas=b.data}function j(a,b){m.query=angular.extend({},m.query,{page:a,limit:b}),h(m.objectName,m.query)}function k(a){m.query=angular.extend({},m.query,{order:a}),h(m.objectName,m.query)}function l(a){f.path("/"+m.objectName+"/profiledetail/"+a)}var m=this;m.objectName="profilewithpermission",m.heads={},m.limitoption=[10,25,50,100],m.total=0,m.query={search:"",order:null,limit:10,page:1},m.selected=[],m.onPaginate=j,m.onReorder=k,m.getDetail=l,m.loadList=h,m.cancleSearch=g,h(m.objectName,m.query)}angular.module("layout").controller("ProfileListController",["$q","$scope","$routeParams","ProfileListService","$timeout","$location",a])}(),function(){"use strict";function a(a,b){return{getList:function(a,c,d){return b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})},getPopupList:function(a,c,d){return c.view="popup",b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("ProfileListService",["$q","apiService",a])}(),function(){function a(a,b,c,d){function e(b){f.selected=b,d.search("object",b),a.loadLayout(b,function(a){f.blocks=a})}var f=this,g=d.search();f.objects=[],f.selectObject=e,a.loadObject(function(a){f.objects=a,e(g.object?g.object:a[0].name)})}angular.module("layout").controller("SettingsLayoutEditorController",["SettingsService","$log","$scope","$location",a])}(),function(){"use strict";function a(a,b){return{loadObject:function(a){b.authget("Settings/Layout/objectAll").then(function(b){var c=b.data.data;a(c)})},loadLayout:function(a,c){b.authget("Settings/Layout/object/"+a).then(function(a){var b=a.data.data;c(b)})}}}angular.module("layout").service("SettingsService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");g.show(b).then(function(){d.deleteRecord(k.objectName,k.record,function(a){f.path("/"+k.objectName+"/list")})})}var k=this;k.objectName="Travel",k.record=c.record,k.deleteRecord=j,k.errorStatus=!1,d.getDetail(k.objectName,k.record,{},function(a){k.blocks=a.blocks,k.label=a.label,k.data=a.data;
},i.error_page)}angular.module("layout").controller("TravelDetailController",["$q","$scope","$routeParams","detailService","$timeout","$location","$mdDialog","$rootScope","helperService",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit(i.objectName,i.record,i.data,function(a){f.path("/"+i.objectName+"/detail/"+a.id)})}var i=this;i.objectName="Travel",i.record=c.record,i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){i.blocks=a.blocks,i.label=a.label,i.data=a.data},g.error_page)}angular.module("layout").controller("TravelEditController",["$q","$scope","$routeParams","editService","$timeout","$location","helperService",a])}(),function(){function a(a,b,c,d,e,f){function g(){m.query.search="",h(m.objectName,m.query)}function h(a,b){m.promise=d.getList(a,b,i)}function i(a){var b=a.listInfo;m.heads=a.header,m.total=b.total,m.listdatas=b.data}function j(a,b){m.query=angular.extend({},m.query,{page:a,limit:b}),h(m.objectName,m.query)}function k(a){m.query=angular.extend({},m.query,{order:a}),h(m.objectName,m.query)}function l(a){f.path("/"+m.objectName+"/detail/"+a)}var m=this;m.objectName="Travel",m.heads={},m.limitoption=[10,25,50,100],m.total=0,m.query={search:"",order:null,limit:10,page:1},m.selected=[],m.onPaginate=j,m.onReorder=k,m.getDetail=l,m.loadList=h,m.cancleSearch=g,h(m.objectName,m.query)}angular.module("layout").controller("TravelListController",["$q","$scope","$routeParams","listService","$timeout","$location",a])}(),function(){"use strict";function a(a,b){return{getDetail:function(a,c,d,e,f){return b.authget("user/"+a+"/detail/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},deleteRecord:function(a,c,d){return b.authpost("user/"+a+"/delete/"+c,{}).then(function(a){var b=a.data.data;d(b)})},getList:function(a,c,d){return b.authget("user/"+a+"/list",c).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("UserdetailService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit(i.objectName,i.record,i.data,function(a){f.path("/"+i.objectName+"/detail/"+a.id)})}var i=this;i.objectName=c.objectname,i.record=c.record,i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){i.blocks=a.blocks,i.label=a.label,i.data=a.data},g.error_page)}angular.module("layout").controller("UserEditController",["$q","$scope","$routeParams","UsereditService","$timeout","$location","helperService",a])}(),function(){"use strict";function a(a,b,c){return{getEdit:function(a,c,d,e,f){return b.authget("user/"+a+"/edit/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},getList:function(a,c,d){return b.authget("user/"+a+"/list",c).then(function(a){var b=a.data.data;d(b)})},getPickList:function(a,c,d){return b.authget("picklist/"+a+"/list",c).then(function(a){var b=a.data.data;d(b)})},getListCC:function(a,c,d){return b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})},saveEdit:function(a,d,e,f){return b.authpost("user/"+a+"/edit/"+d,e).then(function(a){if(a.data.success){if(f(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;c.alert_error({error_code:b.code,error_massage:b.massage})}}else c.alert_error(a.data)})}}}angular.module("layout").service("UsereditService",["$q","apiService","helperService",a])}(),function(){"use strict";function a(a,b){return{getList:function(a,c,d){return b.authget("user/"+a+"/list",c).then(function(a){var b=a.data.data;d(b)})},getPopupList:function(a,c,d){return c.view="popup",b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("UserlistService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delete record").targetEvent(a).ok("Yes").cancel("No");g.show(b).then(function(){d.deleteRecord(k.objectName,k.record,function(a){console.log("delete success:"+a),f.path("/"+k.objectName+"/list")})})}var k=this;k.objectName="user",k.record=c.record,k.deleteRecord=j,k.errorStatus=!1,k.role=[,"Admin","Supervisor","Employee"],k.profile=[,"Admin","Supervisor","Employee"],d.getDetail(k.objectName,k.record,{r:k.record},function(a){k.blocks=a.fieldname,k.labels=a.fieldfill,k.datas=a.object,k.datas.profilename=a.object.profile.profilewithpermission,k.datas.status=a.object.status.userstatusname,k.datas.supervisor=a.supervisor.nickname,k.datas.rolename=a.role.rolename},i.error_page)}angular.module("layout").controller("UserDetailController",["$q","$scope","$routeParams","UserdetailService","$timeout","$location","$mdDialog","$rootScope","helperService",a])}(),function(){function a(a,b,c,d,e,f){function g(){n.query.search="",h(n.objectName,n.query)}function h(a,b){n.promise=d.getList(a,b,i)}function i(a){n.heads=a.heads,n.total=a.object.total,n.listdatas=a.object}function j(a,b){n.query=angular.extend({},n.query,{page:a,limit:b}),h(n.objectName,n.query)}function k(a){n.query=angular.extend({},n.query,{order:a}),h(n.objectName,n.query)}function l(a){f.path("/"+n.objectName+"/detail/"+a)}function m(){n.role=UerlistService.get("Role/role")}var n=this;n.objectName="user",n.heads=[],n.limitoption=[10,25,50,100],n.total=0,n.query={search:"",order:null,limit:10,page:1},n.selected=[],n.onPaginate=j,n.onReorder=k,n.getDetail=l,n.getRole=m,n.userNameList=[],n.role=[,"Admin","Supervisor","Employee"],n.profile=[,"Admin","Supervisor","Employee"],n.status=[,"Active","Inactive"],n.loadList=h,n.cancleSearch=g,h(n.objectName,n.query)}angular.module("layout").controller("UserListController",["$q","$scope","$routeParams","UserlistService","$timeout","$location",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit("testObject",i.record,i.data,function(a){f.path("/"+i.objectName+"/detail/"+a.id)})}var i=this;i.objectName="testObject",i.record="",i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){i.blocks=a.blocks,i.label=a.label,i.data=a.data},g.error_page)}angular.module("layout").controller("testObjectEditController",["$q","$scope","$routeParams","editService","$timeout","$location","helperService",a])}(),function(){angular.module("layout").directive("ngFileUpload",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.ngFileUpload),f=e.assign,g=$(c).parent(),h=$("<input>",{"class":"md-input",readonly:"readonly",style:"width: 180px; margin-top: 10px;"}),i=$("<button>",{type:"button","aria-label":"import","class":"md-fab md-button md-ink-ripple md-mini",style:"float: left;"}).html('<i class="material-icons">file_upload</i>').click(function(){$(c).click()});$(c).hide().after(h).after(i),c.bind("change",function(){var a=c[0].files[0];h.val(a?a.name:""),g.addClass(a?"md-input-has-value md-input-focused":"").removeClass(a?"":"md-input-has-value md-input-focused"),b.$apply(function(){f(b,a)})})}}}])}(),function(){function a(a,b){return{require:"ngModel",link:function(c,d,e,f){var g=(new Date).getTime(),h="__"+e.ngModel.split(".").join("")+g,i=$('<md-card flex="100"> <img  ng-hide="!'+e.ngModel+'" /> </md-card>'),j=$('<md-button class="md-raised" > <label class="block" ng-show="!'+e.ngModel+'" for="'+h+'">Receipt</label> <label class="block" ng-hide="!'+e.ngModel+'" for="'+h+'">Change</label> </md-button>'),k=$('<md-button class="md-raised" ng-hide="!'+e.ngModel+'" ng-click="'+e.ngModel+"=''\" >Clear</md-button>"),l=$("img",i).data("setDefault",!1);$(d).attr("id",h).addClass("ng-hide").before(a(i)(c)).before(a(k)(c)).before(a(j)(c)),c.$watch(function(){"string"!=typeof f.$viewValue||l.data("setDefault")||l.attr("src",f.$viewValue).data("setDefault",!0)}),d.bind("change",function(a){var d=(a.srcElement||a.target).files[0],e=$("<canvas>").appendTo("body").hide(),g=e[0].getContext("2d"),h=new Image;h.onload=function(){var a=h.width,d=h.height,i=Math.min(500,a),j=Math.min(500,d),k=Math.min(i/a,j/d),m=a*k,n=d*k;e[0].width=m,e[0].height=n,g.drawImage(h,0,0,m,n);var o=e[0].toDataURL(),p=b.b64toBlob(o),q=URL.createObjectURL(p);l.attr("src",q),c.$apply(function(){f.$setViewValue(p)}),e.remove()},h.src=URL.createObjectURL(d)})}}}angular.module("layout").directive("ngImageSelect",["$compile","helperService",a])}();