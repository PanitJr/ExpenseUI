!function(){"use strict";angular.module("auth",["ngRoute","ngCookies"]).run(["$rootScope","$controller",function(a,b){a.Auth=b("AuthController"),a.$on("$routeChangeStart",function(b,c,d){a.Auth.setLayout()})}])}(),function(){"use strict";function a(a){a.when("/",{templateUrl:"views/objects/Item/dashboard.html",controller:"DashboardController as dashboard"}),a.when("/:objectname/list",{templateUrl:"views/layout/list.html",controller:"ListController as list"}),a.when("/:objectname/detail/:record",{templateUrl:"views/layout/detail.html",controller:"DetailController as detail"}),a.when("/:objectname/edit/:record",{templateUrl:"views/layout/edit.html",controller:"EditController as edit"}),a.when("/:objectname/edit",{templateUrl:"views/layout/edit.html",controller:"EditController as edit"})}function b(a){a.when("/Users/list",{templateUrl:"views/objects/Users/list.html",controller:"UserListController as list"}),a.when("/Users/detail/:record",{templateUrl:"views/objects/Users/detail.html",controller:"UserDetailController as detail"}),a.when("/Users/edit/:record?",{templateUrl:"views/objects/Users/edit.html",controller:"UserEditController as edit"}),a.when("/",{templateUrl:"views/objects/Item/dashboard.html",controller:"DashboardController as dashboard"}),a.when("/Item/list",{templateUrl:"views/objects/Item/dashboard.html",controller:"DashboardController as dashboard"}),a.when("/Item/detail/:record",{templateUrl:"views/objects/Item/detail.html",controller:"ItemDetailController as detail"}),a.when("/Expense/list",{templateUrl:"views/objects/Expense/list.html",controller:"ExpenseListController as list"}),a.when("/Expense/detail/:record",{templateUrl:"views/objects/Expense/detail.html",controller:"ExpenseDetailController as detail"}),a.when("/AllExpense/list",{templateUrl:"views/objects/Expense/AllExpense.html",controller:"AllExpenseController as list"})}angular.module("layout",["ngRoute","ngMaterial"]).config(["$routeProvider","$mdDateLocaleProvider",function(c,d){b(c),a(c),d.formatDate=function(a){return moment(a).format("YYYY-MM-DD")}}]).run(["$rootScope","$controller",function(a,b){a.errorTemplate="views/layout/error.html",a.history=window.history,a.$on("$routeChangeSuccess",function(b,c,d){a.error={status:!1,code:null,massage:null}})}])}(),function(){function a(a,b,c,d,e,f,g){function h(){a.post("login",{u:m.email,p:m.password}).then(function(a){var c=a.data;c.success?(m.data=c.data,b.put("auth_token",c.data.token),k()):m.error_massage=c.error_massage})}function i(c){var d=c.getBasicProfile();d?a.post("logingoogle",{u:d.getEmail(),Fname:d.getGivenName(),Lname:d.getFamilyName()}).then(function(a){console.log(a);var c=a.data;c.success?(gapi.auth2.getAuthInstance().signOut(),b.put("auth_token",c.data.token),f.permissions=c.data.permissions,k()):m.error_massage=c.error_massage}):m.error_massage=result.error_massage}function j(){b.remove("auth_token"),k()}function k(){"undefined"!=typeof b.get("auth_token")?a.authpost("current_user",{}).success(function(a){m.data=a.data.user,l("layout")}).error(function(a){l("login")}):l("login")}function l(a){f._body!=n[a]&&(f._body=n[a])}var m=this;m.email=null,m.password=null,m.data={},m.login=h,m.logout=j,m.setLayout=k,m.confirm={};var n={layout:"views/layout/layout.html",login:"views/auth/login.html"};window.loginGoogle=i,m.showConfirm=function(a){m.confirm=g.confirm().title("Would you like to delete your debt?").textContent("All of the banks have agreed to forgive you your debts.").ariaLabel("Lucky day").targetEvent(a).ok("Please do it!").cancel("Sounds like a scam"),g.show(m.confirm).then(function(){j()},function(){})}}angular.module("auth").controller("AuthController",["apiService","$cookies","$location","$log","$q","$rootScope","$mdDialog",a])}(),function(){function a(a,b,c){function d(){var a=new google.visualization.DataTable;a.addColumn("string","Topping"),a.addColumn("number","Slices"),a.addRows([["Last 4 Month",e.columnchart[4]],["Last 3 Month",e.columnchart[3]],["Last 2 Month",e.columnchart[2]],["Last Month",e.columnchart[1]],["This Month",e.columnchart[0]]]);var b=new google.visualization.DataTable;b.addColumn("string","Topping"),b.addColumn("number","Slices"),b.addRows([[e.piechart[0].name,e.piechart[0].cost],[e.piechart[1].name,e.piechart[1].cost],[e.piechart[2].name,e.piechart[2].cost],[e.piechart[3].name,e.piechart[3].cost]]);var c={title:"Bar Chart: company expenses by Opportunity",width:400,height:300},d=new google.visualization.BarChart(document.getElementById("piechart_div"));d.draw(b,c);var f={title:"Column Chart: Company expense summary by month",width:400,height:300,legend:"none"},g=new google.visualization.ColumnChart(document.getElementById("barchart_div"));g.draw(a,f);var h={title:"Pie Chart: company expenses by Opportunity proportion",width:400,height:300},i=new google.visualization.PieChart(document.getElementById("Pjune"));i.draw(b,h)}var e=this;e.columnchart=[],b.get(c.apiurl+"columnchart").then(function(a){e.columnchart=a.data.data}),b.get(c.apiurl+"piechart").then(function(a){e.piechart=a.data.data,console.log(e.piechart)}),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(d)}angular.module("layout").controller("ChartController",["ChartService","$http","$rootScope",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");g.show(b).then(function(){d.deleteRecord(k.objectName,k.record,function(a){f.path("/"+k.objectName+"/list")})})}var k=this;k.objectName=c.objectname,k.record=c.record,k.deleteRecord=j,k.errorStatus=!1,d.getDetail(k.objectName,k.record,{},function(a){k.blocks=a.blocks,k.label=a.label,k.data=a.data},i.error_page)}angular.module("layout").controller("DetailController",["$q","$scope","$routeParams","detailService","$timeout","$location","$mdDialog","$rootScope","helperService",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit(i.objectName,i.record,i.data,function(a){f.path("/"+i.objectName+"/detail/"+a.id)})}var i=this;i.objectName=c.objectname,i.record=c.record,i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){i.blocks=a.blocks,i.label=a.label,i.data=a.data},g.error_page)}angular.module("layout").controller("EditController",["$q","$scope","$routeParams","editService","$timeout","$location","helperService",a])}(),function(){function a(a,b,c,d,e){function f(){a("left").toggle()}var g=this;g.toggleList=f}angular.module("layout").controller("LayoutController",["$mdSidenav","$mdBottomSheet","$log","$scope","$controller",a])}(),function(){function a(a,b,c,d,e,f){function g(){m.query.search="",h(m.objectName,m.query)}function h(a,b){m.promise=d.getList(a,b,i)}function i(a){var b=a.listInfo;m.heads=a.header,m.total=b.total,m.listdatas=b.data}function j(a,b){m.query=angular.extend({},m.query,{page:a,limit:b}),h(m.objectName,m.query)}function k(a){m.query=angular.extend({},m.query,{order:a}),h(m.objectName,m.query)}function l(a){f.path("/"+m.objectName+"/detail/"+a)}var m=this;m.objectName=c.objectname,m.heads={},m.limitoption=[10,25,50,100],m.total=0,m.query={search:"",order:null,limit:10,page:1},m.selected=[],m.onPaginate=j,m.onReorder=k,m.getDetail=l,m.loadList=h,m.cancleSearch=g,h(m.objectName,m.query)}angular.module("layout").controller("ListController",["$q","$scope","$routeParams","listService","$timeout","$location",a])}(),function(){function a(a,b,c,d){function e(){b("left").toggle()}function f(a){g.selected=a}var g=this;g.toggleList=e,g.selectObject=f,g.object=[],g.managelist=[],a.loadObjectHome(function(a){g.object=a.list,g.managelist=a.manage})}angular.module("layout").controller("SidenavController",["layoutService","$mdSidenav","$mdBottomSheet","$log","$q",a])}(),function(){function a(a,b,c,d){function e(a){k.progress=!0;var b=f(c.data_approve.data);d({data:b,report:c.report,filename:c.filename,param:c.param},function(b){var d=angular.extend({},c,b);j(a,d)})}function f(a){var b=[];for(var c in a)a[c]._a&&b.push(a[c]._l);return b.join(":")}function g(a){angular.forEach(c.data_approve.data,function(b){b._a=a})}function h(a){a||(k.approveAll=!1)}function i(a){j(a,c),b.cancel()}function j(a,c){b.show({controller:"importResultController",controllerAs:"import",templateUrl:"views/layout/importResult.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!1,locals:{report:c}})}var k=this;k.cancel=i,k.save=e,k.selectAll=g,k.lineSelect=h,k.data_approve=c.data_approve,k.duplicate=c.duplicate,k.approveAll=!0,k.progress=!1}angular.module("layout").controller("importApproveController",["$scope","$mdDialog","report","importFnApprove",a])}(),function(){function a(a,b,c,d,e){function f(a){j.progress=!0,c(e,function(b){b.approve?i(a,b,d):h(a,b)})}function g(){b.cancel()}function h(a,c){b.show({controller:"importResultController",controllerAs:"import",templateUrl:"views/layout/importResult.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!1,locals:{report:c}})}function i(a,c,d){b.show({controller:"importApproveController",controllerAs:"import",templateUrl:"views/layout/importApprove.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!1,locals:{report:c,importFnApprove:d}})}var j=this;j.cancel=g,j.save=f,j.sample=e.sample,j.fieldMapping=e.fieldMapping,j.sample=e.sample,j.progress=!1}angular.module("layout").controller("importMappingController",["$scope","$mdDialog","importFn","importFnApprove","data_template",a])}(),function(){function a(a,b,c,d){function e(){b.cancel(),c.reload()}var f=this;f.done=e,f.report=d}angular.module("layout").controller("importResultController",["$scope","$mdDialog","$route","report",a])}(),function(){"use strict";function a(a,b,c,d,e){var f=d.apiurl,g=function(a){e.alert_error({error_code:a.error_code,error_massage:a.error_massage}),window.history.back()},h=function(a){return angular.extend({},a||{},{token:c.get("auth_token")})},i=function(a,b,c){var d,e=b||new FormData;for(var f in a)a.hasOwnProperty(f)&&(d=c?c+"["+f+"]":f,"object"!=typeof a[f]||a[f]instanceof File||a[f]instanceof Blob?a[f]instanceof Blob?e.append(d,a[f],d):e.append(d,a[f]):i(a[f],e,d));return e};return{configAjax:{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;"}},post:function(a,c){return b.post(f+a,$.param(c),this.configAjax).error(g)},get:function(a,c){return b.get(f+a+"?"+$.param(c),this.configAjax).error(g)},authpost:function(a,c){var d=h(c),e=i(d);return b.post(f+a,e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).error(g)},authget:function(a,c){return c=h(c),b.get(f+a+"?"+$.param(c),this.configAjax).error(g)},authgetUrl:function(a,b){return b=h(b),f+a+"?"+$.param(b)},authpostFile:function(a,d){return d.append("token",c.get("auth_token")),b.post(f+a,d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).error(g)}}}angular.module("auth").service("apiService",["$q","$http","$cookies","$rootScope","helperService",a])}(),function(){"use strict";function a(a,b,c){return{getData:function(a,c,d){return b.get(a,c).then(function(a){a.data.success&&d(a.data.data)})}}}angular.module("layout").service("ChartService",["$q","apiService","helperService",a])}(),function(){"use strict";function a(a,b,c){return{submit:function(a,d,e,f){return b.authpost(a+"/submit/"+d,e).then(function(a){if(a.data.success){if(f(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;c.alert_error({error_code:b.code,error_massage:b.massage})}}else c.alert_error(a.data)})}}}angular.module("layout").factory("DashboardService",["$q","apiService","helperService",a])}(),function(){"use strict";function a(a,b){return{getDetail:function(a,c,d,e,f){return b.authget(a+"/detail/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},deleteRecord:function(a,c,d){return b.authpost(a+"/delete/"+c,{}).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("detailService",["$q","apiService",a])}(),function(){"use strict";function a(a,b,c){return{getEdit:function(a,c,d,e,f){return b.authget(a+"/edit/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},saveEdit:function(a,d,e,f){return b.authpost(a+"/edit/"+d,e).then(function(a){if(a.data.success){if(f(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;c.alert_error({error_code:b.code,error_massage:b.massage})}}else c.alert_error(a.data)})},getCost:function(a,c,d,e,f){return b.get(a+"/edit/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})}}}angular.module("layout").service("editService",["$q","apiService","helperService",a])}(),function(){"use strict";function a(a,b){return{loadObjectHome:function(a){b.authget("object_home").then(function(b){var c=b.data.data;a(c)})}}}angular.module("layout").service("layoutService",["$q","apiService",a])}(),function(){"use strict";function a(a,b){return{getList:function(a,c,d){return b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})},getAllExpense:function(a,c,d){return b.authget(a+"/AllExpense",c).then(function(a){var b=a.data.data;d(b)})},getPopupList:function(a,c,d){return c.view="popup",b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("listService",["$q","apiService",a])}(),function(){"use strict";function a(a,b,c){return{show_alert_error:!1,b64toBlob:function(a){var b;b=a.split(",")[0].indexOf("base64")>=0?atob(a.split(",")[1]):unescape(a.split(",")[1]);for(var c=a.split(",")[0].split(":")[1].split(";")[0],d=new Uint8Array(b.length),e=0;e<b.length;e++)d[e]=b.charCodeAt(e);return new Blob([d],{type:c})},error_page:function(a){c.error={status:!0,code:a.error_code,massage:a.error_massage}},alert_error:function(a){var c=this;c.show_alert_error||(c.show_alert_error=!0,b.show(b.alert().clickOutsideToClose(!1).title(a.error_code).textContent(a.error_massage).ariaLabel(a.error_code).ok("OK")).then(function(){c.show_alert_error=!1}))}}}angular.module("layout").service("helperService",["$q","$mdDialog","$rootScope",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){o.query.search="",i(o.objectName,o.query)}function i(a,c){o.listdatas=[],o.listSAppdatas=[],o.listPaiddatas=[],void 0!=o.filterDate&&(c.userPickList.month=o.filterDate.getMonth()+1,c.userPickList.year=o.filterDate.getFullYear()),o.promise=b.getAllExpense(a,c,j)}function j(a){var b=a.listInfo,c=a.listFilters;o.heads=a.header,o.total=0;for(var d=0,e=b.data.length;d<e;d++)1==b.data[d].status?o.listdatas.push(b.data[d]):4==b.data[d].status?o.listSAppdatas.push(b.data[d]):o.listPaiddatas.push(b.data[d]),o.total+=parseFloat(b.data[d].total_price);o.userlis=c.userlis,o.statuslis=c.statuslis,o.opplis=c.opplis}function k(a,b){o.query=angular.extend({},o.query,{page:a,limit:b}),i(o.objectName,o.query)}function l(a){o.query=angular.extend({},o.query,{order:a}),i(o.objectName,o.query)}function m(a){c.path("/"+o.objectName+"/detail/"+a)}function n(a){g.alert_error({error_code:a.error_code,error_massage:a.error_massage}),window.history.back()}var o=this;o.objectName="Expense",o.monthlis=[1,2,3,4,5,6,7,8,9,10,11,12],o.heads={},o.limitoption=[9999],o.total=0,o.filterDate=void 0,o.query={search:"",order:null,limit:9999,page:1,userPickList:{user:0,Opp:0,month:0,year:0,status:0}},o.listdatas=[],o.listSAppdatas=[],o.listPaiddatas=[],o.paidSelected=[],o.selected=[],o.onPaginate=k,o.onReorder=l,o.getDetail=m,o.loadList=i,o.cancleSearch=h,i(o.objectName,o.query),o.paidExpenses=function(){for(var a=0,b=o.paidSelected.length;a<b;a++){var c=angular.extend({},o.paidSelected[a]||{},{token:d.get("auth_token")});e.post(f.apiurl+"Expense/paid/"+o.paidSelected[a].id+"?token="+d.get("auth_token"),c,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).error(n)}location.reload()}}angular.module("layout").controller("AllExpenseController",["$routeParams","listService","$location","$cookies","$http","$rootScope","helperService",a])}(),function(){function a(a,b,c,d,e,f,g,h){function i(a){var e=d.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");d.show(e).then(function(){b.deleteRecord(k.objectName,k.record,function(a){c.path("/"+k.objectName+"/list")})})}function j(a){f.alert_error({error_code:a.error_code,error_massage:a.error_massage}),window.history.back()}var k=this;k.objectName="Expense",k.record=a.record,k.deleteRecord=i,k.errorStatus=!1,b.getDetail(k.objectName,k.record,{},function(a){k.blocks=a.blocks,k.label=a.label,k.data=a.data},f.error_page),k.showPrompt=function(a){var b=d.prompt().title("What would you name your dog?").textContent("Bowser is a common name.").placeholder("Dog name").ariaLabel("Dog name").initialValue("Buddy").targetEvent(a).ok("Okay!").cancel("I'm a cat person");d.show(b).then(function(a){k.comment="You decided to name your dog "+a+"."},function(){k.comment="You didn't name your dog."})},k.approveExpense=function(a){var b=angular.extend({},k.data||{},{token:g.get("auth_token")});h.post(e.apiurl+"Expense/approve/"+a+"?token="+g.get("auth_token"),b,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).error(j),c.path("/"+k.objectName+"/list")},k.rejectExpense=function(a){var b=angular.extend({},k.data||{},{token:g.get("auth_token")});h.post(e.apiurl+"Expense/reject/"+a+"?token="+g.get("auth_token"),b,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).error(j),c.path("/"+k.objectName+"/list")},k.rejectItem=function(a){h.get(e.apiurl+"Item/reject/"+a+"?token="+g.get("auth_token")).then(function(a){location.reload()})},k.pdf=function(){var a=angular.extend({},k.data||{},{token:g.get("auth_token")});h.post(e.apiurl+"Expense/pdf?token="+g.get("auth_token"),a,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).error(j)},k.getDetail=function(a){c.path("/Item/detail/"+a)}}angular.module("layout").controller("ExpenseDetailController",["$routeParams","detailService","$location","$mdDialog","$rootScope","helperService","$cookies","$http",a])}(),function(){function a(a,b,c){function d(){j.query.search="",e(j.objectName,j.query)}function e(a,c){j.listdatas=[],j.listSAppdatas=[],j.listPaiddatas=[],j.promise=b.getList(a,c,f)}function f(a){var b=a.listInfo;j.heads=a.header,j.total=b.total;for(var c=0,d=b.data.length;c<d;c++)1==b.data[c].status?j.listdatas.push(b.data[c]):4==b.data[c].status?j.listSAppdatas.push(b.data[c]):j.listPaiddatas.push(b.data[c])}function g(a,b){j.query=angular.extend({},j.query,{page:a,limit:b}),e(j.objectName,j.query)}function h(a){j.query=angular.extend({},j.query,{order:a}),e(j.objectName,j.query)}function i(a){c.path("/"+j.objectName+"/detail/"+a)}var j=this;j.objectName="Expense",j.heads={},j.limitoption=[10,25,50,100],j.total=0,j.query={search:"",order:null,limit:10,page:1},j.listdatas=[],j.listSAppdatas=[],j.listPaiddatas=[],j.selected=[],j.onPaginate=g,j.onReorder=h,j.getDetail=i,j.loadList=e,j.cancleSearch=d,e(j.objectName,j.query)}angular.module("layout").controller("ExpenseListController",["$routeParams","listService","$location",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){n.query.search="",i(n.objectName,n.query)}function i(a,b){n.promise=c.getList(a,b,j)}function j(a){var b=a.listInfo;n.heads=a.header,n.total=b.total,n.listdatas=b.data}function k(a,b){n.query=angular.extend({},n.query,{page:a,limit:b}),i(n.objectName,n.query)}function l(a){n.query=angular.extend({},n.query,{order:a}),i(n.objectName,n.query)}function m(a){d.path("/"+n.objectName+"/detail/"+a)}var n=this;n.defaultVal=!1,n.defaultOpportunity=1,n.defaultDate=new Date,n.limitoption=[25,50,100],n.objectName="Item",n.tempcost=0,n.objectList=[],n.selected=[],n.record="",n.heads={},n.limitoption=[10,25,50,100],n.total=0,n.query={search:"",order:null,limit:10,page:1},n.selected=[],n.onPaginate=k,n.onReorder=l,n.getDetail=m,n.loadList=i,n.cancleSearch=h,i(n.objectName,n.query),n.getitemcost=function(a){void 0!=a.travel.origination&&void 0!=a.travel.destination&&f.get(e.apiurl+"TravelUtil/"+a.travel.travelsubtype+"/cost/"+a.travel.origination+"/"+a.travel.destination+"?token="+g.get("auth_token")).then(function(b){console.log(b.data.data[0].cost),a.cost=parseFloat(b.data.data[0].cost)})},n.addObject=function(c){b.getEdit("Item",n.record,{},function(a){a.objectname="Item",null==a.data.item&&(a.data.item={}),a.data.opportunity=n.defaultOpportunity,a.data.date=new Date,a.data.date=n.defaultDate,a.data.category=c,1==c&&(a.data.travelField=!0),n.objectList.push(a)},a.error_page)},n.removeObject=function(a){n.objectList.splice(a,1)},n.clone=function(){for(var c=0,d=n.selected.length;c<d;c++)b.getEdit("Item",n.selected[c].id,{},function(a){null==a.data.item&&(a.data.item={}),a.data.id="",a.data.status=1,a.data.attachment="",a.data.expense_id="",a.data.date=new Date,a.data.date=n.defaultDate,n.objectList.push(a)},a.error_page)},n.save=function(a,c){if(void 0==a.data.item.item_date)a.data.date="",a.data.date=n.defaultDate.getFullYear()+"-"+(n.defaultDate.getMonth()+1)+"-"+n.defaultDate.getDate();else{var d=a.data.date;a.data.date="",a.data.date=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()}a.data.itemname="",b.saveEdit("Item",a.data.id,a.data,function(a){n.objectList.splice(c,1)}),i("Item",n.query)},n.getStation=function(a){1==a.travel.travelsubtype||2==a.travel.travelsubtype||3==a.travel.travelsubtype||4==a.travel.travelsubtype?(f.get(e.apiurl+"TravelUtil/"+a.travel.travelsubtype+"/?token="+g.get("auth_token")).then(function(a){n.Ostations=a.data.data,n.Dstations=a.data.data}),a.travelField=!1):a.travelField=!0},n.submitExpense=function(){b.saveEdit("Expense",void 0,void 0,function(a){}),i("Item",n.query)}}angular.module("layout").controller("DashboardController",["helperService","editService","listService","$location","$rootScope","$http","$cookies",a])}(),function(){function a(a,b,c,d,e){function f(a){var e=d.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");d.show(e).then(function(){b.deleteRecord(g.objectName,g.record,function(a){c.path("/"+g.objectName+"/list")})})}var g=this;g.objectName="Item",g.record=a.record,g.deleteRecord=f,g.errorStatus=!1,b.getDetail(g.objectName,g.record,{},function(a){g.blocks=a.blocks,g.label=a.label,g.data=a.data},e.error_page)}angular.module("layout").controller("ItemDetailController",["$routeParams","detailService","$location","$mdDialog","helperService",a])}(),function(){function a(a,b){var c=this;a.get(b.apiurl+"allleave").then(function(a){console.log(a),c.leave=a.data.data})}angular.module("layout").controller("AllLeaveController",["$http","$rootScope",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");g.show(b).then(function(){d.deleteRecord(k.objectName,k.record,function(a){f.path("/"+k.objectName+"/leavelist")})})}var k=this;k.objectName="Leave",k.record=c.record,k.deleteRecord=j,k.errorStatus=!1,d.getDetail(k.objectName,k.record,{},function(a){console.log(a),k.blocks=a.blocks,k.label=a.label,k.data=a.data},i.error_page)}angular.module("layout").controller("LeaveDetailController",["$q","$scope","$routeParams","LeaveDetailService","$timeout","$location","$mdDialog","$rootScope","helperService",a])}(),function(){"use strict";function a(a,b){return{getDetail:function(a,c,d,e,f){return b.authget(a+"/detail/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},deleteRecord:function(a,c,d){return b.authpost(a+"/delete/"+c,{}).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("LeaveDetailService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit(i.objectName,i.record,i.data,function(a){f.path("/"+i.objectName+"/leavedetail/"+a.id)})}var i=this;i.objectName="Leave",i.record=c.record,i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){console.log(a),i.blocks=a.blocks,i.label=a.label,i.data=a.data},g.error_page)}angular.module("layout").controller("LeaveEditController",["$q","$scope","$routeParams","LeaveEditService","$timeout","$location","helperService",a])}(),function(){"use strict";function a(a,b,c){return{getEdit:function(a,c,d,e,f){return b.authget(a+"/edit/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},getLeave:function(a,c,d,e,f){return b.authget("individualleave",d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},saveEdit:function(a,d,e,f){return b.authpost(a+"/edit/"+d,e).then(function(a){if(a.data.success){if(f(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;c.alert_error({error_code:b.code,error_massage:b.massage})}}else c.alert_error(a.data)})}}}angular.module("layout").service("LeaveEditService",["$q","apiService","helperService",a])}(),function(){function a(a,b,c,d,e,f,g,h){function i(){o.query.search="",j(o.objectName,o.query)}function j(a,b){o.promise=d.getList(a,b,k)}function k(a){console.log(a);var b=a.listInfo;o.heads=a.header,o.total=b.total,o.listdatas=b.data}function l(a,b){o.query=angular.extend({},o.query,{page:a,limit:b}),j(o.objectName,o.query)}function m(a){o.query=angular.extend({},o.query,{order:a}),j(o.objectName,o.query)}function n(a){f.path("/"+o.objectName+"/leavedetail/"+a)}var o=this;o.objectName="Leave",o.heads={},o.limitoption=[10,25,50,100],o.total=0,o.query={search:"",order:null,limit:5,page:1},o.selected=[],o.start_date=new Date,o.end_date=new Date,o.allday=!1,o.onPaginate=l,o.onReorder=m,o.getDetail=n,o.loadList=j,o.cancleSearch=i,o.individualleave={},g.getLeave("","",{},function(a){o.individualleave=a}),o.record="",o.data={},g.getEdit(o.objectName,o.record,{},function(a){console.log(a),o.blocks=a.blocks,o.label=a.label,o.data=a.data},h.error_page),o.save=function(){o.data.start_date=o.start_date.getFullYear()+"-"+(o.start_date.getMonth()+1)+"-"+o.start_date.getDate(),o.data.end_date=o.end_date.getFullYear()+"-"+(o.end_date.getMonth()+1)+"-"+o.end_date.getDate(),g.saveEdit("Leave",o.record,o.data,function(a){o.loadList("Leave",o.query),g.getLeave("","",{},function(a){o.individualleave=a})})},j(o.objectName,o.query),o.calculateDuration=function(){o.data.leave_duration=8*(o.end_date.getDate()-o.start_date.getDate())+8}}angular.module("layout").controller("LeaveListController",["$q","$scope","$routeParams","LeaveListService","$timeout","$location","LeaveEditService","helperService",a])}(),function(){"use strict";function a(a,b){return{getList:function(a,c,d){return b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})},getPopupList:function(a,c,d){return c.view="popup",b.authget(a+"/detail",c).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("LeaveListService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");g.show(b).then(function(){d.deleteRecord(k.objectName,k.record,function(a){f.path("/"+k.objectName+"/profilelist")})})}var k=this;k.objectName="profilewithpermission",k.record=c.record,k.deleteRecord=j,k.errorStatus=!1,d.getDetail(k.objectName,k.record,{},function(a){k.blocks=a.blocks,k.label=a.label,k.data=a.data,k.data.item=JSON.parse(a.data.item),k.data.expense=JSON.parse(a.data.expense),k.data.leave=JSON.parse(a.data.leave),k.data.user=JSON.parse(a.data.user),k.data.setting=JSON.parse(a.data.setting)},i.error_page)}angular.module("layout").controller("ProfileDetailController",["$q","$scope","$routeParams","ProfiledetailService","$timeout","$location","$mdDialog","$rootScope","helperService",a])}(),function(){"use strict";function a(a,b){return{getDetail:function(a,c,d,e,f){return b.authget(a+"/detail/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},deleteRecord:function(a,c,d){return b.authpost(a+"/delete/"+c,{}).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("ProfiledetailService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit(i.objectName,i.record,i.data,function(a){console.log("added profile id "+a.id),f.path("/"+i.objectName+"/profiledetail/"+a.id)})}var i=this;i.objectName="profilewithpermission",i.record=c.record,i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){i.blocks=a.blocks,i.label=a.label,i.data=a.data,i.data.item=JSON.parse(a.data.item),i.data.expense=JSON.parse(a.data.expense),i.data.leave=JSON.parse(a.data.leave),i.data.user=JSON.parse(a.data.user),i.data.setting=JSON.parse(a.data.setting)},g.error_page)}angular.module("layout").controller("ProfileEditController",["$q","$scope","$routeParams","ProfileeditService","$timeout","$location","helperService",a])}(),function(){"use strict";function a(a,b,c){return{getEdit:function(a,c,d,e,f){return b.authget(a+"/edit/"+c,d).then(function(a){a.data.success?e(a.data.data):f(a.data)})},saveEdit:function(a,d,e,f){return b.authpost(a+"/edit/"+d,e).then(function(a){if(a.data.success){if(f(a.data.data),"undefined"!=typeof a.data.data.___error){var b=a.data.data.___error;c.alert_error({error_code:b.code,error_massage:b.massage})}}else c.alert_error(a.data)})}}}angular.module("layout").service("ProfileeditService",["$q","apiService","helperService",a])}(),function(){function a(a,b,c,d,e,f){function g(){m.query.search="",h(m.objectName,m.query)}function h(a,b){m.promise=d.getList(a,b,i)}function i(a){var b=a.listInfo;m.heads=a.header,m.total=b.total,m.listdatas=b.data}function j(a,b){m.query=angular.extend({},m.query,{page:a,limit:b}),h(m.objectName,m.query)}function k(a){m.query=angular.extend({},m.query,{order:a}),h(m.objectName,m.query)}function l(a){f.path("/"+m.objectName+"/profiledetail/"+a)}var m=this;m.objectName="profilewithpermission",m.heads={},m.limitoption=[10,25,50,100],m.total=0,m.query={search:"",order:null,limit:10,page:1},m.selected=[],m.onPaginate=j,m.onReorder=k,m.getDetail=l,m.loadList=h,m.cancleSearch=g,h(m.objectName,m.query)}angular.module("layout").controller("ProfileListController",["$q","$scope","$routeParams","ProfileListService","$timeout","$location",a])}(),function(){"use strict";function a(a,b){return{getList:function(a,c,d){return b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})},getPopupList:function(a,c,d){return c.view="popup",b.authget(a+"/list",c).then(function(a){var b=a.data.data;d(b)})}}}angular.module("layout").service("ProfileListService",["$q","apiService",a])}(),function(){function a(a,b,c,d){function e(b){f.selected=b,d.search("object",b),a.loadLayout(b,function(a){f.blocks=a})}var f=this,g=d.search();f.objects=[],f.selectObject=e,a.loadObject(function(a){f.objects=a,e(g.object?g.object:a[0].name)})}angular.module("layout").controller("SettingsLayoutEditorController",["SettingsService","$log","$scope","$location",a])}(),function(){"use strict";function a(a,b){return{loadObject:function(a){b.authget("Settings/Layout/objectAll").then(function(b){var c=b.data.data;a(c)})},loadLayout:function(a,c){b.authget("Settings/Layout/object/"+a).then(function(a){var b=a.data.data;c(b)})}}}angular.module("layout").service("SettingsService",["$q","apiService",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){var b=g.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");g.show(b).then(function(){d.deleteRecord(k.objectName,k.record,function(a){f.path("/"+k.objectName+"/list")})})}var k=this;k.objectName="Travel",k.record=c.record,k.deleteRecord=j,k.errorStatus=!1,d.getDetail(k.objectName,k.record,{},function(a){k.blocks=a.blocks,k.label=a.label,k.data=a.data},i.error_page)}angular.module("layout").controller("TravelDetailController",["$q","$scope","$routeParams","detailService","$timeout","$location","$mdDialog","$rootScope","helperService",a]);
}(),function(){function a(a,b,c,d,e,f,g){function h(){d.saveEdit(i.objectName,i.record,i.data,function(a){f.path("/"+i.objectName+"/detail/"+a.id)})}var i=this;i.objectName="Travel",i.record=c.record,i.save=h,i.data={},d.getEdit(i.objectName,i.record,{},function(a){i.blocks=a.blocks,i.label=a.label,i.data=a.data},g.error_page)}angular.module("layout").controller("TravelEditController",["$q","$scope","$routeParams","editService","$timeout","$location","helperService",a])}(),function(){function a(a,b,c,d,e,f){function g(){m.query.search="",h(m.objectName,m.query)}function h(a,b){m.promise=d.getList(a,b,i)}function i(a){var b=a.listInfo;m.heads=a.header,m.total=b.total,m.listdatas=b.data}function j(a,b){m.query=angular.extend({},m.query,{page:a,limit:b}),h(m.objectName,m.query)}function k(a){m.query=angular.extend({},m.query,{order:a}),h(m.objectName,m.query)}function l(a){f.path("/"+m.objectName+"/detail/"+a)}var m=this;m.objectName="Travel",m.heads={},m.limitoption=[10,25,50,100],m.total=0,m.query={search:"",order:null,limit:10,page:1},m.selected=[],m.onPaginate=j,m.onReorder=k,m.getDetail=l,m.loadList=h,m.cancleSearch=g,h(m.objectName,m.query)}angular.module("layout").controller("TravelListController",["$q","$scope","$routeParams","listService","$timeout","$location",a])}(),function(){function a(a,b,c,d,e){function f(a){var e=d.confirm().textContent("Are you sure you want to delete this Account?").ariaLabel("delate record").targetEvent(a).ok("Yes").cancel("No");d.show(e).then(function(){b.deleteRecord(g.objectName,g.record,function(a){c.path("/"+g.objectName+"/list")})})}var g=this;g.objectName="Users",g.record=a.record,g.deleteRecord=f,g.errorStatus=!1,b.getDetail(g.objectName,g.record,{},function(a){g.blocks=a.blocks,g.label=a.label,g.data=a.data},e.error_page)}angular.module("layout").controller("UserDetailController",["$routeParams","detailService","$location","$mdDialog","helperService",a])}(),function(){function a(a,b,c,d){function e(){b.saveEdit(f.objectName,f.record,f.data,function(a){c.path("/"+f.objectName+"/detail/"+a.id)})}var f=this;f.objectName="Users",f.record=a.record,f.save=e,f.data={},b.getEdit(f.objectName,f.record,{},function(a){f.blocks=a.blocks,f.label=a.label,f.data=a.data},d.error_page)}angular.module("layout").controller("UserEditController",["$routeParams","editService","$location","helperService",a])}(),function(){function a(a,b){function c(){i.query.search="",d(i.objectName,i.query)}function d(b,c){i.promise=a.getList(b,c,e)}function e(a){var b=a.listInfo;i.heads=a.header,i.total=b.total,i.listdatas=b.data}function f(a,b){i.query=angular.extend({},i.query,{page:a,limit:b}),d(i.objectName,i.query)}function g(a){i.query=angular.extend({},i.query,{order:a}),d(i.objectName,i.query)}function h(a){b.path("/"+i.objectName+"/detail/"+a)}var i=this;i.objectName="Users",i.heads={},i.limitoption=[10,25,50,100],i.total=0,i.query={search:"",order:null,limit:10,page:1},i.selected=[],i.onPaginate=f,i.onReorder=g,i.getDetail=h,i.loadList=d,i.cancleSearch=c,d(i.objectName,i.query)}angular.module("layout").controller("UserListController",["listService","$location",a])}(),function(){angular.module("layout").directive("ngFileUpload",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.ngFileUpload),f=e.assign,g=$(c).parent(),h=$("<input>",{"class":"md-input",readonly:"readonly",style:"width: 180px; margin-top: 10px;"}),i=$("<button>",{type:"button","aria-label":"import","class":"md-fab md-button md-ink-ripple md-mini",style:"float: left;"}).html('<i class="material-icons">file_upload</i>').click(function(){$(c).click()});$(c).hide().after(h).after(i),c.bind("change",function(){var a=c[0].files[0];h.val(a?a.name:""),g.addClass(a?"md-input-has-value md-input-focused":"").removeClass(a?"":"md-input-has-value md-input-focused"),b.$apply(function(){f(b,a)})})}}}])}(),function(){function a(a,b){return{require:"ngModel",link:function(c,d,e,f){var g=(new Date).getTime(),h="__"+e.ngModel.split(".").join("")+g,i=$('<md-card flex="100"> <img  ng-hide="!'+e.ngModel+'" /> </md-card>'),j=$('<md-button class="md-raised" > <label class="block" ng-show="!'+e.ngModel+'" for="'+h+'">Receipt</label> <label class="block" ng-hide="!'+e.ngModel+'" for="'+h+'">Change</label> </md-button>'),k=$('<md-button class="md-raised" ng-hide="!'+e.ngModel+'" ng-click="'+e.ngModel+"=''\" >Clear</md-button>"),l=$("img",i).data("setDefault",!1);$(d).attr("id",h).addClass("ng-hide").before(a(i)(c)).before(a(k)(c)).before(a(j)(c)),c.$watch(function(){"string"!=typeof f.$viewValue||l.data("setDefault")||l.attr("src",f.$viewValue).data("setDefault",!0)}),d.bind("change",function(a){var d=(a.srcElement||a.target).files[0],e=$("<canvas>").appendTo("body").hide(),g=e[0].getContext("2d"),h=new Image;h.onload=function(){var a=h.width,d=h.height,i=Math.min(500,a),j=Math.min(500,d),k=Math.min(i/a,j/d),m=a*k,n=d*k;e[0].width=m,e[0].height=n,g.drawImage(h,0,0,m,n);var o=e[0].toDataURL(),p=b.b64toBlob(o),q=URL.createObjectURL(p);l.attr("src",q),c.$apply(function(){f.$setViewValue(p)}),e.remove()},h.src=URL.createObjectURL(d)})}}}angular.module("layout").directive("ngImageSelect",["$compile","helperService",a])}();